(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ecc6367"],{"2da1":function(t,e,n){"use strict";n.d(e,"a",function(){return f});var a=n("d225"),r=n("b0b4"),s=n("308d"),i=n("6bb5"),c=n("2a88"),o=n("4e2b"),u=n("3fa7"),l=n("0fea"),f=function(t){function e(){return Object(a["a"])(this,e),Object(s["a"])(this,Object(i["a"])(e).apply(this,arguments))}return Object(o["a"])(e,t),Object(r["a"])(e,[{key:"canEdit",get:function(){return l["a"].identity.rid===this.created_by}},{key:"title",get:function(){var t=moment(this.end_at),e=t.format("dddd"),n=t.format("M.DD");return{full:"第".concat(this.order,"次 - ").concat(e,"(").concat(n,")"),part:"".concat(e,"(").concat(n,")")}}},{key:"statusParsed",get:function(){var t=moment(),e=this.start_at,n=this.end_at,a=moment(this.finish_at),r="";return r=this.status?a.isAfter(n,"day")?"overdue-completed":"completed":t.isBefore(e,"day")?"about-to-start":t.isAfter(n,"day")?"undone":"processing",r}},{key:"submitTimeLabel",get:function(){return moment(this.updated_at).format("YYYY.MM.DD")}}],[{key:"findAll",value:function(t){return Object(c["a"])(Object(i["a"])(e),"findAll",this).call(this,{},{url:"".concat(this.baseURL,"/goal-task-events/assignments/").concat(t)})}},{key:"controller",get:function(){return"goal-task-events"}}]),e}(u["a"])},"430c":function(t,e,n){"use strict";var a=n("aee1"),r=n.n(a);r.a},"68e0":function(t,e,n){"use strict";n.d(e,"a",function(){return f});var a=n("cebc"),r=n("d225"),s=n("b0b4"),i=n("308d"),c=n("6bb5"),o=n("2a88"),u=n("4e2b"),l=n("bf01"),f=function(t){function e(){return Object(r["a"])(this,e),Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,null,[{key:"findAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o["a"])(Object(c["a"])(e),"findAll",this).call(this,Object(a["a"])({sort:"order"},t),n)}},{key:"NAME",get:function(){return"Subject"}},{key:"type",get:function(){return"subject"}}]),e}(l["default"])},"6d49":function(t,e,n){},7573:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("keep-alive",[n("router-view",{staticClass:"router-body"})],1),n("m-footer")],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.$isCichuApp?t._e():n("div",{staticClass:"footer-bar"},t._l(t.routeConfig,function(e,a){return n("div",{key:a,staticClass:"footer-bar__item",class:{footer__item_active:t.$route.path.includes(e.path)},on:{click:function(n){return t.onClickItem(e)}}},[t.hasNotice(e)?n("div",{staticClass:"footer-bar__elective-notice"}):t._e(),t.$route.path.includes(e.path)?n("sem-icon",{attrs:{size:"20",name:e.iconActive}}):n("sem-icon",{attrs:{size:"20",name:e.iconNormal}}),n("span",{staticClass:"footer-bar__item-title"},[t._v(t._s(e.title))])],1)}),0)},i=[],c=n("5176"),o=n.n(c),u=n("795b"),l=n.n(u),f=(n("ac6a"),n("5df3"),n("768b")),h=(n("96cf"),n("3b8d")),d=n("5fb8"),p=n("fa2a"),b=n("c449"),g={data:function(){return{hasGoalElectiveNotice:!1,hasGoalAssignmentNotice:!1}},computed:{routeConfig:function(){return[{path:"/student/home",iconNormal:"class-f-normal",iconActive:"class-f-pressed",title:"主页"},{path:"/student/grades",iconNormal:"score-f-normal",iconActive:"score-f-pressed",title:this.$t("成绩")},{path:"/student/task/".concat(d["a"].canUse()?"goal":"course","-task-assignments"),iconNormal:"task-f-normal",iconActive:"task-f-pressed",title:"任务"},{path:"/student/function-center",iconNormal:"peopel-f-normal",iconActive:"peopel-f-normal1",title:"我的"}]}},created:function(){var t=Object(h["a"])(regeneratorRuntime.mark(function t(){var e,n,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l.a.all([Object(b["c"])(),p["a"].hasNewNotice()]);case 2:e=t.sent,n=Object(f["a"])(e,2),a=n[0],r=n[1],o()(this,{hasGoalElectiveNotice:a,hasGoalAssignmentNotice:r});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{isTaskItem:function(t){return"/student/task/goal-task-assignments"===t.path},onClickItem:function(t){this.hasGoalElectiveNotice&&this.isTaskItem(t)&&(Object(b["b"])(),this.hasGoalElectiveNotice=!1),this.isTaskItem(t),this.$router.push({path:t.path})},hasNotice:function(t){return this.isTaskItem(t)&&(this.hasGoalAssignmentNotice||this.hasGoalElectiveNotice)}}},m=g,v=(n("430c"),n("2877")),k=Object(v["a"])(m,s,i,!1,null,"0902d572",null),y=k.exports,_={components:{mFooter:y}},j=_,O=(n("a3c3c"),Object(v["a"])(j,a,r,!1,null,"4128030c",null));e["default"]=O.exports},"93f1":function(t,e,n){"use strict";n.d(e,"a",function(){return p});n("96cf");var a=n("3b8d"),r=n("d225"),s=n("b0b4"),i=n("308d"),c=n("6bb5"),o=n("2a88"),u=n("4e2b"),l=n("3fa7"),f=n("fa2a"),h=n("2da1"),d=n("0fea"),p=function(t){function e(){return Object(r["a"])(this,e),Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"getGradeTrendData",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getJSON("".concat(this.constructor.createResourceURL(this.primary),"/grade/trends"));case 3:return e=t.sent,t.abrupt("return",{status:"ok",data:e});case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",{status:"no-assessment-plan",data:[]});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"getGradeTableData",value:function(){return this.getJSON("".concat(this.constructor.createResourceURL(this.primary),"/grade/records"))}},{key:"finish",value:function(t){var e="".concat(this.constructor.baseURL,"/").concat(this.constructor.controller,"/").concat(this.primary,"/finish");return this.$http.put(e,{status:t})}},{key:"canEdit",get:function(){return d["a"].identity.rid===this.receiver_id}},{key:"statusParsed",get:function(){var t=moment(),e=this.task.start_at,n=this.task.end_at,a=moment(this.finish_at),r="";switch(_.get(this,"task.type")){case"grade":r=this.status?"completed":this.finish_at?"undone":"processing";break;case"other":r=this.status?a.isAfter(n,"day")?"overdue-completed":"completed":t.isBefore(e,"day")?"about-to-start":t.isAfter(n,"day")?"undone":"processing";break;default:break}return r}}],[{key:"parse",value:function(t){return t.task=new f["a"](t.task),t.task.goal_gpa=+t.task.goal_gpa,t.events&&(t.events=t.events.map(function(t){return new h["a"](t)})),t}},{key:"findAllByStudentId",value:function(t){return Object(o["a"])(Object(c["a"])(e),"findAll",this).call(this,{},{url:"".concat(this.baseURL,"/goal-tasks/students/").concat(t,"/assignments")})}},{key:"controller",get:function(){return"goal-tasks/assignments"}}]),e}(l["a"])},a3c3c:function(t,e,n){"use strict";var a=n("6d49"),r=n.n(a);r.a},aee1:function(t,e,n){},c449:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"b",function(){return d});n("96cf");var a=n("3b8d"),r=n("0fea"),s=n("d9ef"),i=n("b184"),c=n("5fb8"),o="goal-elective-notice",u={};function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat("https://elective.seiue.com","/electives/").concat(t)}function f(){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"].canUse()){t.next=10;break}return t.next=3,i["a"].findCurrentByStudent(r["a"].reflection.id,{only_start:0,page:1,"per-page":1});case 3:if(e=t.sent,e.length){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,s["a"].get(o);case 8:return u=t.sent,t.abrupt("return",!u);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}},t)})),h.apply(this,arguments)}function d(){c["a"].canUse()&&s["a"].set(o,1)}},fa2a:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var a=n("f499"),r=n.n(a),s=n("cebc"),i=(n("2fdb"),n("55dd"),n("6762"),n("96cf"),n("3b8d")),c=n("d225"),o=n("b0b4"),u=n("308d"),l=n("6bb5"),f=n("4e2b"),h=n("3fa7"),d=n("68e0"),p=n("93f1"),b=n("0fea"),g=n("ed08"),m=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(f["a"])(e,t),Object(o["a"])(e,[{key:"canEdit",get:function(){return this.created_by===b["a"].reflection.id}},{key:"isClassDeleted",get:function(){return this.classes.length<this.class_ids.length}},{key:"isCollaboratorsDeleted",get:function(){return this.collaborators.length<this.collaborator_ids.length}},{key:"titleText",get:function(){if(this.type===this.constructor.TYPE.other)return this.title;var t=this.classes,e=this.subject,n=this.goal_gpa;try{return"".concat(t.length>1?e.name:t[0].name,"GPA达到").concat(+n)}catch(a){return"课程已被删除"}}},{key:"repeatRuleLabel",get:function(){var t=this.repeat_rule,e=t.is_repeat,n=t.type,a=t.number,r=t.week_days;if(!e)return"不重复";if("day"===n)return"每天";var s=r.map(function(t){return"星期".concat(Object(g["D"])(t))}).join("、");return"每".concat(a,"周的 ").concat(s)}},{key:"isRepeat",get:function(){return!!this.repeat_rule.is_repeat}},{key:"collaboratorsLabel",get:function(){return this.collaborators.length?this.collaborators.map(function(t){return t.name}).join(","):"无"}},{key:"subjectLabel",get:function(){return _.get(this,"subject.name","无")}},{key:"klassLabel",get:function(){return this.classes&&this.classes.length?this.classes.map(function(t){return t.name}).join(","):"无"}},{key:"semesterLabel",get:function(){return _.get(this,"semester.name","无学期信息")}}],[{key:"parse",value:function(t){return t.goal_gpa=+t.goal_gpa,t.goal_id=t.goal_id||_.get(t,"goal.id",0),t.assignment=new p["a"](t.assignment),t}},{key:"hasNewNotice",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getJSON("".concat(this.baseURL,"/goal-task/unread"));case 2:return e=t.sent,t.abrupt("return",e.unread);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getSubjects",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=["语文","数学","英语","物理","化学","生物","地理","历史","思想政治"],t.next=3,d["a"].findAll();case 3:return n=t.sent,a=_.filter(n,function(t){return e.includes(t.name)}),a.sort(function(t,n){return e.indexOf(t.name)-e.indexOf(n.name)}),t.abrupt("return",a);case 7:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getClasses",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b["a"].reflection.id;return this.getJSON("".concat(this.baseURL,"/goal-tasks/students/").concat(e,"/classes"),Object(s["a"])({},t,{expand:["subject","teachers"].join(",")}))}},{key:"format",value:function(t){var e=["type","goal_id","subject_id","class_ids","collaborator_ids","title","content","rid"],n=[];return n=t.type===this.TYPE.grade?["goal_gpa"]:["repeat_rule","start_at","end_at"],_.pick(t,e.concat(n))}},{key:"loadCollaboratorOptions",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=this.getJSON("".concat(this.createResourceURL("","teachers")),{name:e}),t.abrupt("return",n);case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRepeatCount",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getJSON("".concat(this.createResourceURL("","repeat-rule/days")),{query:r()(e)});case 2:return n=t.sent,t.abrupt("return",n.length);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getStats",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$http.post("".concat(this.createResourceURL("","stats/$query")),t)}},{key:"controller",get:function(){return"goal-tasks"}},{key:"defaults",get:function(){var t=moment().format("YYYY-MM-DD");return{type:this.TYPE.grade,goal_id:0,subject_id:"",class_ids:[],collaborator_ids:[],title:"",rid:b["a"].reflection.id,goal_gpa:4.5,content:"",repeatCount:0,repeat_rule:{is_repeat:!1,type:"day",number:1,week_days:[]},start_at:t,end_at:t}}},{key:"TYPE",get:function(){return{grade:"grade",other:"other"}}},{key:"repeatTypes",get:function(){return[{label:"不重复",value:"no-repeat"},{label:"每天",value:"day"},{label:"每周",value:"week"}]}}]),e}(h["a"])}}]);